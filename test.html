<head>
  <!-- <script type="text/javascript" src="http://api.map.baidu.com/location/ip?ak=7pjIPXFrGw2Khm4TczM06XnbBT8RtIsP&coor=bd09ll"></script> -->
  <script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>
</head>
<body>
  <div id="allmap"></div>
</body>
<script type="text/javascript">
  let city = "a";
  $.ajax({
    url:
      "http://api.map.baidu.com/location/ip?ak=7pjIPXFrGw2Khm4TczM06XnbBT8RtIsP&coor=bd09ll",
    dataType: "jsonp",
    processData: false,
    type: "get",
    async : false,
    success: function (data) {
      console.log(data);
      if (data.status == 0) {
        //console.log(data.content.address_detail.city),
          (city = data.content.address_detail.city);
          console.log(city)
          $("#allmap").text(city)
       
      }
    },
    error: function (XMLHttpRequest, textStatus, errorThrown) {
      console.log(XMLHttpRequest.status);
      console.log(XMLHttpRequest.readyState);
      console.log(textStatus);
    },
  });
  console.log(city)
 
    // $(function () {
    //   $("#allmap").text('city'),
    //   console.log(city);
    // });
</script>
